# FAQ - Часто задаваемые вопросы

## Общие вопросы

### Что такое AutoSub?
AutoSub - это Telegram-бот для автоматической обработки видео: добавление субтитров, перевод, озвучка и конвертация в вертикальный формат.

### Сколько это стоит?
- **FREE** - бесплатно (с ограничениями)
- **PRO** - 299₽/мес или 2990₽/год
- **CREATOR** - 599₽/мес или 5990₽/год

### Какие языки поддерживаются?
50+ языков, включая:
- Русский, Английский, Испанский, Французский
- Немецкий, Итальянский, Португальский
- Китайский, Японский, Корейский
- Арабский, Хинди, Украинский
- И многие другие

### Какие платформы поддерживаются для загрузки?
- YouTube
- TikTok
- Instagram
- Прямая загрузка видеофайлов через Telegram

## Технические вопросы

### Какие системные требования?
- **Минимум:** 2GB RAM, 2 CPU, 10GB диска
- **Рекомендуется:** 4GB RAM, 4 CPU, 20GB диска
- **Оптимально:** 8GB RAM, 8 CPU, 50GB диска + GPU

### Можно ли использовать GPU для ускорения?
Да! В `.env` установите:
```env
WHISPER_DEVICE=cuda
```

И в `docker-compose.yml` добавьте:
```yaml
worker:
  deploy:
    resources:
      reservations:
        devices:
          - driver: nvidia
            count: 1
            capabilities: [gpu]
```

### Сколько времени занимает обработка?
- **Короткое видео (30 сек):** ~30-60 сек
- **Среднее видео (5 мин):** ~2-5 мин
- **Длинное видео (30 мин):** ~10-30 мин

Зависит от:
- Длительности видео
- Выбранных опций (перевод, озвучка)
- Мощности сервера
- Модели Whisper (tiny, base, small, medium, large)

### Какая точность распознавания речи?
Зависит от модели Whisper:
- **tiny** - быстро, но неточно (~70-80%)
- **base** - баланс (80-85%)
- **small** - хорошо (85-90%)
- **medium** - очень хорошо (90-95%)
- **large** - отлично (95-98%)

### Можно ли обрабатывать несколько видео одновременно?
Да! Настройте количество workers в `.env`:
```env
MAX_WORKERS=5
```

В `docker-compose.yml`:
```yaml
worker:
  deploy:
    replicas: 5
```

## Проблемы и решения

### Бот не отвечает на команды

**Причины:**
1. Неправильный токен бота
2. Бот не запущен
3. Проблемы с БД/Redis

**Решение:**
```bash
# Проверьте токен в .env
# Проверьте логи
docker-compose logs bot

# Перезапустите
docker-compose restart bot
```

### Обработка видео зависает

**Причины:**
1. Недостаточно памяти
2. Слишком большая модель Whisper
3. Проблемы с FFmpeg

**Решение:**
```bash
# Используйте меньшую модель
WHISPER_MODEL=tiny

# Увеличьте память для worker
# В docker-compose.yml:
worker:
  deploy:
    resources:
      limits:
        memory: 8G
```

### Ошибка "Out of memory"

**Решение:**
1. Используйте меньшую модель Whisper (tiny/base)
2. Увеличьте RAM сервера
3. Уменьшите количество workers
4. Используйте CPU вместо GPU

### Субтитры неточные

**Решение:**
1. Используйте большую модель (medium/large)
2. Убедитесь, что аудио качественное
3. Проверьте, что язык определился правильно

### Видео не загружается с YouTube

**Причины:**
1. Видео защищено от скачивания
2. Проблемы с yt-dlp
3. Блокировка по географии

**Решение:**
```bash
# Обновите yt-dlp
pip install -U yt-dlp

# Или в Docker:
docker-compose exec worker pip install -U yt-dlp
docker-compose restart worker
```

### Платежи не работают

**Причины:**
1. Неправильные данные Platega
2. Webhook не настроен
3. Проблемы с подписью

**Решение:**
1. Проверьте данные в `.env`
2. Убедитесь, что webhook доступен
3. Проверьте логи webhook:
```bash
docker-compose logs webhook
```

## Оптимизация

### Как ускорить обработку?

1. **Используйте GPU:**
```env
WHISPER_DEVICE=cuda
```

2. **Увеличьте workers:**
```env
MAX_WORKERS=5
```

3. **Используйте меньшую модель:**
```env
WHISPER_MODEL=base  # вместо large
```

4. **Добавьте RAM:**
```yaml
worker:
  deploy:
    resources:
      limits:
        memory: 8G
```

### Как уменьшить использование диска?

1. **Автоочистка:**
```env
CLEANUP_HOURS=12  # Очищать через 12 часов
```

2. **Ручная очистка:**
```bash
python scripts/cleanup_storage.py
```

3. **Настройте cron:**
```bash
crontab -e
# Добавьте:
0 */6 * * * python /path/to/scripts/cleanup_storage.py
```

### Как уменьшить использование памяти?

1. Используйте `tiny` или `base` модель
2. Уменьшите количество workers
3. Отключите TTS если не нужно
4. Используйте PostgreSQL на отдельном сервере

## Безопасность

### Как защитить бота от спама?

1. **Rate limiting** уже встроен (по тарифам)
2. **Банлист:** Добавьте функцию в `admin_handler.py`
3. **Капча:** Интегрируйте перед обработкой

### Как защитить данные?

1. **SSL для webhook:**
```bash
certbot --nginx -d your-domain.com
```

2. **Сильные пароли:**
```env
DB_PASSWORD=очень_сложный_пароль_123!@#
```

3. **Файрвол:**
```bash
# Разрешите только нужные порты
ufw allow 22,80,443/tcp
ufw enable
```

4. **Регулярные бэкапы:**
```bash
# Настройте автоматический бэкап
crontab -e
0 2 * * * /path/to/scripts/backup_db.sh
```

## Масштабирование

### Как обрабатывать больше видео?

1. **Горизонтальное масштабирование:**
```yaml
worker:
  deploy:
    replicas: 10
```

2. **Kubernetes для больших нагрузок**

3. **Распределенная архитектура:**
- Отдельный сервер для БД
- Отдельный сервер для Redis
- Несколько серверов для workers

### Сколько видео можно обрабатывать?

**На одном сервере (4GB RAM, 4 CPU):**
- ~100-200 видео/день

**С 3 workers (8GB RAM, 8 CPU):**
- ~500-1000 видео/день

**С кластером (5 серверов):**
- ~5000+ видео/день

## Монетизация

### Как настроить цены?

Измените в `config/constants.py`:
```python
PRICING = {
    "one_time_short": 29,
    UserTier.PRO: {
        "monthly": 299,
        "yearly": 2990,
    },
}
```

### Какие платежные системы поддерживаются?

Сейчас: **Platega**

Можно добавить:
- YooMoney
- CloudPayments
- Stripe
- PayPal

### Как отслеживать доход?

```bash
# Админ-панель
/admin -> Платежи

# Или через БД:
docker-compose exec postgres psql -U autosub
SELECT SUM(amount) FROM payments WHERE status='completed';
```

## Поддержка

### Где получить помощь?

1. **Документация:** README.md, GETTING_STARTED.md
2. **GitHub Issues:** [создайте issue](https://github.com/your-repo/issues)
3. **Telegram:** @support
4. **Email:** support@example.com

### Как сообщить об ошибке?

1. Создайте issue на GitHub
2. Опишите проблему
3. Приложите:
   - Логи: `docker-compose logs > logs.txt`
   - Версию: `docker --version`
   - Настройки: `.env` (без паролей!)

### Хочу новую фичу!

1. Создайте issue с меткой "enhancement"
2. Опишите:
   - Что нужно добавить
   - Зачем это нужно
   - Как это должно работать

---

**Не нашли ответ?** Создайте [issue](https://github.com/your-repo/issues) или напишите в [поддержку](mailto:support@example.com)

